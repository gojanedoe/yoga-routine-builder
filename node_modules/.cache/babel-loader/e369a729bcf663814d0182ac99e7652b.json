{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimePosition = exports.TimeOption = exports.AudioPlayerVariation = exports.getColors = exports.AudioPlayerComponentsOrder = exports.useComponentStyles = void 0;\n\nvar Slider_1 = __importDefault(require(\"@material-ui/core/Slider\"));\n\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\n\nvar useMediaQuery_1 = __importDefault(require(\"@material-ui/core/useMediaQuery\"));\n\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\n\nvar useTheme_1 = __importDefault(require(\"@material-ui/core/styles/useTheme\"));\n\nvar makeStyles_1 = __importDefault(require(\"@material-ui/core/styles/makeStyles\"));\n\nvar Grid_1 = __importDefault(require(\"@material-ui/core/Grid\"));\n\nvar Repeat_1 = __importDefault(require(\"@material-ui/icons/Repeat\"));\n\nvar classnames_1 = __importDefault(require(\"classnames\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar AudioDownloadsControl_1 = __importDefault(require(\"./AudioDownloadsControl\"));\n\nvar AudioPlayControl_1 = __importDefault(require(\"./AudioPlayControl\"));\n\nvar AudioVolumeControl_1 = __importDefault(require(\"./AudioVolumeControl\"));\n\nvar AudioPlayerCloseButton_1 = __importDefault(require(\"./AudioPlayerCloseButton\"));\n\nvar actions_1 = require(\"./state/actions\");\n\nvar helpers_1 = require(\"./state/helpers\");\n\nvar player_1 = __importDefault(require(\"./state/player\"));\n\nvar reducer_1 = __importDefault(require(\"./state/reducer\"));\n\nvar isSafari = !!navigator.userAgent.match(/Version\\/[\\d\\.]+.*Safari/);\nvar inititalState = {\n  player: {\n    status: player_1.default.STATUS.PAUSE,\n    volume: {\n      status: player_1.default.VOLUME.STATUS.UNMUTE,\n      value: player_1.default.VOLUME.DEFAULT_VALUE\n    },\n    duration: 0,\n    remaning: 0,\n    progress: 0,\n    current: 0,\n    loop: false,\n    autoplay: false\n  }\n};\nexports.useComponentStyles = makeStyles_1.default(function (theme) {\n  var elevations = {};\n  theme.shadows.forEach(function (shadow, index) {\n    elevations[\"elevation\" + index] = {\n      boxShadow: shadow\n    };\n  });\n  return __assign({\n    root: function (props) {\n      return {\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        color: theme.palette.text.primary,\n        width: props.width,\n        height: props.height,\n        transition: theme.transitions.create('box-shadow')\n      };\n    },\n    sliderContainerWrapper: function (props) {\n      return {\n        width: 'auto',\n        flex: '1 1 auto',\n        display: 'flex',\n        boxSizing: 'border-box',\n        order: props.componentsOrder\n      };\n    },\n    sliderContainer: {\n      flex: '1 1 auto'\n    },\n    slider: function (props) {\n      return {\n        color: props.playerColors.active\n      };\n    },\n    commonContainer: {\n      flex: '0 0 auto',\n      '&:hover': {\n        cursor: 'pointer'\n      }\n    },\n    iconSelected: function (props) {\n      return {\n        color: props.playerColors.selected\n      };\n    },\n    icon: function (props) {\n      return {\n        color: props.playerColors.active,\n        '&:hover': {\n          color: props.playerColors.hover\n        }\n      };\n    },\n    rounded: {\n      borderRadius: theme.shape.borderRadius\n    }\n  }, elevations);\n});\nvar AudioPlayerComponentsOrder;\n\n(function (AudioPlayerComponentsOrder) {\n  AudioPlayerComponentsOrder[\"standart\"] = \"standart\";\n  AudioPlayerComponentsOrder[\"reverse\"] = \"reverse\";\n})(AudioPlayerComponentsOrder = exports.AudioPlayerComponentsOrder || (exports.AudioPlayerComponentsOrder = {}));\n\nvar getColors = function (theme, variation) {\n  if (variation === AudioPlayerVariation.default) {\n    return {\n      active: theme.palette.action.active,\n      selected: theme.palette.action.selected,\n      disabled: theme.palette.action.disabled,\n      hover: theme.palette.action.hover\n    };\n  } else {\n    return {\n      active: theme.palette[variation].main,\n      selected: theme.palette[variation].dark,\n      disabled: theme.palette[variation].light,\n      hover: theme.palette[variation].light\n    };\n  }\n};\n\nexports.getColors = getColors;\nvar AudioPlayerVariation;\n\n(function (AudioPlayerVariation) {\n  AudioPlayerVariation[\"primary\"] = \"primary\";\n  AudioPlayerVariation[\"secondary\"] = \"secondary\";\n  AudioPlayerVariation[\"default\"] = \"default\";\n})(AudioPlayerVariation = exports.AudioPlayerVariation || (exports.AudioPlayerVariation = {}));\n\nvar AudioPlayerPreload;\n\n(function (AudioPlayerPreload) {\n  AudioPlayerPreload[\"auto\"] = \"auto\";\n  AudioPlayerPreload[\"metadata\"] = \"metadata\";\n  AudioPlayerPreload[\"none\"] = \"none\";\n})(AudioPlayerPreload || (AudioPlayerPreload = {}));\n\nvar TimeOption;\n\n(function (TimeOption) {\n  TimeOption[\"single\"] = \"single\";\n  TimeOption[\"double\"] = \"double\";\n})(TimeOption = exports.TimeOption || (exports.TimeOption = {}));\n\nvar TimePosition;\n\n(function (TimePosition) {\n  TimePosition[\"start\"] = \"start\";\n  TimePosition[\"end\"] = \"end\";\n})(TimePosition = exports.TimePosition || (exports.TimePosition = {}));\n\nvar AudioPlayer = function (_a) {\n  var _b, _c;\n\n  var src = _a.src,\n      _d = _a.rounded,\n      rounded = _d === void 0 ? true : _d,\n      _e = _a.elevation,\n      elevation = _e === void 0 ? 1 : _e,\n      _f = _a.useStyles,\n      useStyles = _f === void 0 ? function () {\n    return {};\n  } : _f,\n      _g = _a.width,\n      width = _g === void 0 ? '100%' : _g,\n      _h = _a.height,\n      height = _h === void 0 ? 'auto' : _h,\n      _j = _a.variation,\n      variation = _j === void 0 ? AudioPlayerVariation.default : _j,\n      _k = _a.preload,\n      preload = _k === void 0 ? AudioPlayerPreload.auto : _k,\n      _l = _a.volume,\n      volume = _l === void 0 ? true : _l,\n      _m = _a.muted,\n      muted = _m === void 0 ? null : _m,\n      _o = _a.download,\n      download = _o === void 0 ? false : _o,\n      _p = _a.autoplay,\n      autoplay = _p === void 0 ? false : _p,\n      _q = _a.order,\n      order = _q === void 0 ? AudioPlayerComponentsOrder.standart : _q,\n      _r = _a.loop,\n      loop = _r === void 0 ? false : _r,\n      _s = _a.debug,\n      debug = _s === void 0 ? false : _s,\n      _t = _a.spacing,\n      spacing = _t === void 0 ? undefined : _t,\n      _u = _a.time,\n      time = _u === void 0 ? 'double' : _u,\n      _v = _a.timePosition,\n      timePosition = _v === void 0 ? 'start' : _v,\n      _w = _a.displaySlider,\n      displaySlider = _w === void 0 ? true : _w,\n      _x = _a.displayCloseButton,\n      displayCloseButton = _x === void 0 ? false : _x,\n      icons = _a.icons,\n      _y = _a.onPlayed,\n      onPlayed = _y === void 0 ? function (event) {} : _y,\n      _z = _a.onPaused,\n      onPaused = _z === void 0 ? function (event) {} : _z,\n      _0 = _a.onFinished,\n      onFinished = _0 === void 0 ? function (event) {} : _0,\n      _1 = _a.getPlayer,\n      getPlayer = _1 === void 0 ? function (player, dispatch) {} : _1,\n      _2 = _a.onClose,\n      onClose = _2 === void 0 ? function () {} : _2;\n  var player = React.useRef(null);\n\n  var _3 = React.useState(true),\n      visible = _3[0],\n      setVisibility = _3[1];\n\n  var handleClose = React.useCallback(function () {\n    setVisibility(false);\n    onClose();\n  }, []);\n  var theme = useTheme_1.default();\n  var playerColors = exports.getColors(theme, variation);\n  var componentsOrder = order === AudioPlayerComponentsOrder.standart ? 'unset' : '-1';\n  var componentStyles = {\n    width: width,\n    height: height,\n    playerColors: playerColors,\n    componentsOrder: componentsOrder\n  };\n  var classes = exports.useComponentStyles(componentStyles);\n  var classNames = useStyles(componentStyles);\n  var isMobile = useMediaQuery_1.default(theme.breakpoints.down('sm'));\n  var isSingleTime = React.useMemo(function () {\n    return time === TimeOption.single;\n  }, [time]);\n  var isTimePositionStart = React.useMemo(function () {\n    return timePosition === TimePosition.start;\n  }, [timePosition]);\n\n  var _4 = React.useState(true),\n      showCurrentTime = _4[0],\n      toggleTime = _4[1];\n\n  var toggleCurrentTime = React.useCallback(function () {\n    return toggleTime(function (val) {\n      return !val;\n    });\n  }, [toggleTime]);\n\n  var _5 = React.useReducer(reducer_1.default, inititalState),\n      state = _5[0],\n      dispatch = _5[1];\n\n  var _6 = React.useMemo(function () {\n    return helpers_1.populateDispatch.apply(void 0, __spreadArrays([dispatch, player], actions_1.actionCreators));\n  }, [dispatch, player, actions_1.actionCreators]),\n      _playAudio = _6[0],\n      _pauseAudio = _6[1],\n      _muteAudio = _6[2],\n      _unmuteAudio = _6[3],\n      _changeAudioVolume = _6[4],\n      _setPlayerDuration = _6[5],\n      _setPlayerTime = _6[6],\n      _audioEnded = _6[7],\n      _replayAudio = _6[8],\n      _changePlayerSlider = _6[9],\n      _setPlayerAutoplay = _6[10],\n      _loopAudio = _6[11];\n\n  var handleAudioSliderChange = function (event, progress) {\n    _changePlayerSlider(progress);\n  };\n\n  var handlePlayerTimeUpdate = function () {\n    _setPlayerTime();\n  };\n\n  var handleAudioEnd = function (event) {\n    _audioEnded();\n\n    onFinished(event);\n  };\n\n  var onLoad = function () {\n    var _a, _b, _c, _d;\n\n    if (((_a = player === null || player === void 0 ? void 0 : player.current) === null || _a === void 0 ? void 0 : _a.duration) === Infinity) {\n      player.current.currentTime = 24 * 60 * 60;\n      player.current.currentTime = 0;\n    }\n\n    _setPlayerDuration();\n\n    getPlayer(player.current, dispatch);\n\n    if (((_b = player === null || player === void 0 ? void 0 : player.current) === null || _b === void 0 ? void 0 : _b.currentTime) === 0) {\n      if (((_c = player === null || player === void 0 ? void 0 : player.current) === null || _c === void 0 ? void 0 : _c.autoplay) || ((_d = player === null || player === void 0 ? void 0 : player.current) === null || _d === void 0 ? void 0 : _d.loop)) {} else {\n        _pauseAudio();\n      }\n    }\n  };\n\n  React.useEffect(function () {\n    if (player && player.current) {\n      if (player.current.readyState > 3) {\n        onLoad();\n      }\n\n      if (!player.current.autoplay && autoplay) {\n        _setPlayerAutoplay();\n      }\n\n      if (isSafari) {\n        player.current.load();\n      }\n\n      player.current.addEventListener('canplay', onLoad);\n      player.current.addEventListener('timeupdate', handlePlayerTimeUpdate);\n      player.current.addEventListener('ended', handleAudioEnd);\n      player.current.addEventListener('pause', onPaused);\n      player.current.addEventListener('play', onPlayed);\n    }\n\n    return function () {\n      if (player && player.current) {\n        player.current.removeEventListener('canplay', onLoad);\n        player.current.removeEventListener('timeupdate', handlePlayerTimeUpdate);\n        player.current.removeEventListener('ended', handleAudioEnd);\n        player.current.removeEventListener('pause', onPaused);\n        player.current.removeEventListener('play', onPlayed);\n      }\n    };\n  }, [player, src]);\n  React.useEffect(function () {\n    if ((player === null || player === void 0 ? void 0 : player.current) && typeof muted === 'boolean') {\n      if (muted) {\n        _muteAudio();\n      } else {\n        _unmuteAudio();\n      }\n    }\n  }, [muted]);\n\n  if (debug) {\n    console.log('state', state);\n    console.log('player', player);\n  }\n\n  var handleLoop = function () {\n    _loopAudio(!state.player.loop);\n  };\n\n  var mainContainerSpacing = spacing ? spacing : isMobile ? 2 : 3;\n  var audioKey = Array.isArray(src) ? src[0] : src;\n  var currentTimeComp = React.createElement(Grid_1.default, {\n    item: true,\n    className: classnames_1.default(classes.commonContainer)\n  }, React.createElement(Typography_1.default, {\n    className: classNames.progressTime,\n    onClick: toggleCurrentTime\n  }, showCurrentTime ? helpers_1.getFormattedTime(state.player.current) : helpers_1.getFormattedTime(state.player.remaning, true)));\n  return visible ? React.createElement(Grid_1.default, {\n    container: true,\n    spacing: mainContainerSpacing,\n    component: Paper_1.default,\n    alignItems: \"center\",\n    className: classnames_1.default(classes.root, classes[\"elevation\" + elevation], (_b = {}, _b[classes.rounded] = !rounded, _b), classNames.root)\n  }, React.createElement(\"audio\", {\n    ref: player,\n    hidden: true,\n    preload: preload,\n    key: audioKey\n  }, Array.isArray(src) ? src.map(function (srcLink, index) {\n    return React.createElement(\"source\", {\n      key: index,\n      src: srcLink\n    });\n  }) : React.createElement(\"source\", {\n    src: src\n  })), loop && React.createElement(Grid_1.default, {\n    item: true,\n    className: classes.commonContainer\n  }, React.createElement(Repeat_1.default, {\n    fontSize: \"large\",\n    onClick: handleLoop,\n    className: classnames_1.default((_c = {}, _c[classes.iconSelected] = state.player.loop, _c.selected = state.player.loop, _c[classes.icon] = !state.player.loop, _c), classNames.loopIcon)\n  })), React.createElement(Grid_1.default, {\n    item: true,\n    className: classes.commonContainer\n  }, React.createElement(AudioPlayControl_1.default, {\n    classNames: classNames,\n    icons: icons,\n    playerStatus: state.player.status,\n    playerColors: playerColors,\n    replayAudio: _replayAudio,\n    pauseAudio: _pauseAudio,\n    playAudio: _playAudio\n  })), download && React.createElement(AudioDownloadsControl_1.default, {\n    src: src,\n    playerColors: playerColors\n  }), volume && React.createElement(AudioVolumeControl_1.default, {\n    muted: muted,\n    muteAudio: _muteAudio,\n    unmuteAudio: _unmuteAudio,\n    classNames: classNames,\n    changeAudioVolume: _changeAudioVolume,\n    volume: state.player.volume,\n    playerColors: playerColors,\n    icons: icons\n  }), displaySlider && React.createElement(Grid_1.default, {\n    item: true,\n    container: true,\n    spacing: 2,\n    className: classnames_1.default(classes.sliderContainerWrapper)\n  }, (!isSingleTime || isTimePositionStart) && currentTimeComp, React.createElement(Grid_1.default, {\n    item: true,\n    className: classes.sliderContainer\n  }, React.createElement(Slider_1.default, {\n    className: classnames_1.default(classes.slider, classNames.mainSlider),\n    onChange: handleAudioSliderChange,\n    value: state.player.progress\n  })), !isSingleTime && React.createElement(Grid_1.default, {\n    item: true,\n    className: classes.commonContainer\n  }, React.createElement(Typography_1.default, {\n    className: classNames.progressTime\n  }, helpers_1.getFormattedTime(state.player.duration))), isSingleTime && !isTimePositionStart && currentTimeComp), displayCloseButton && React.createElement(AudioPlayerCloseButton_1.default, {\n    onClose: handleClose,\n    classNames: classNames,\n    playerColors: playerColors,\n    icons: icons\n  })) : null;\n};\n\nexports.default = AudioPlayer;","map":{"version":3,"sources":["../../src/components/AudioPlayer.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TimePosition = exports.TimeOption = exports.AudioPlayerVariation = exports.getColors = exports.AudioPlayerComponentsOrder = exports.useComponentStyles = void 0;\nvar Slider_1 = __importDefault(require(\"@material-ui/core/Slider\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar useMediaQuery_1 = __importDefault(require(\"@material-ui/core/useMediaQuery\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar useTheme_1 = __importDefault(require(\"@material-ui/core/styles/useTheme\"));\nvar makeStyles_1 = __importDefault(require(\"@material-ui/core/styles/makeStyles\"));\nvar Grid_1 = __importDefault(require(\"@material-ui/core/Grid\"));\nvar Repeat_1 = __importDefault(require(\"@material-ui/icons/Repeat\"));\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar React = __importStar(require(\"react\"));\nvar AudioDownloadsControl_1 = __importDefault(require(\"./AudioDownloadsControl\"));\nvar AudioPlayControl_1 = __importDefault(require(\"./AudioPlayControl\"));\nvar AudioVolumeControl_1 = __importDefault(require(\"./AudioVolumeControl\"));\nvar AudioPlayerCloseButton_1 = __importDefault(require(\"./AudioPlayerCloseButton\"));\nvar actions_1 = require(\"./state/actions\");\nvar helpers_1 = require(\"./state/helpers\");\nvar player_1 = __importDefault(require(\"./state/player\"));\nvar reducer_1 = __importDefault(require(\"./state/reducer\"));\nvar isSafari = !!navigator.userAgent.match(/Version\\/[\\d\\.]+.*Safari/);\nvar inititalState = {\n    player: {\n        status: player_1.default.STATUS.PAUSE,\n        volume: {\n            status: player_1.default.VOLUME.STATUS.UNMUTE,\n            value: player_1.default.VOLUME.DEFAULT_VALUE,\n        },\n        duration: 0,\n        remaning: 0,\n        progress: 0,\n        current: 0,\n        loop: false,\n        autoplay: false,\n    },\n};\nexports.useComponentStyles = makeStyles_1.default(function (theme) {\n    var elevations = {};\n    theme.shadows.forEach(function (shadow, index) {\n        elevations[\"elevation\" + index] = {\n            boxShadow: shadow,\n        };\n    });\n    return __assign({ root: function (props) { return ({\n            position: 'relative',\n            backgroundColor: theme.palette.background.paper,\n            color: theme.palette.text.primary,\n            width: props.width,\n            height: props.height,\n            transition: theme.transitions.create('box-shadow'),\n        }); }, sliderContainerWrapper: function (props) { return ({\n            width: 'auto',\n            flex: '1 1 auto',\n            display: 'flex',\n            boxSizing: 'border-box',\n            order: props.componentsOrder,\n        }); }, sliderContainer: {\n            flex: '1 1 auto',\n        }, slider: function (props) { return ({\n            color: props.playerColors.active,\n        }); }, commonContainer: {\n            flex: '0 0 auto',\n            '&:hover': {\n                cursor: 'pointer',\n            },\n        }, iconSelected: function (props) { return ({\n            color: props.playerColors.selected,\n        }); }, icon: function (props) { return ({\n            color: props.playerColors.active,\n            '&:hover': {\n                color: props.playerColors.hover,\n            },\n        }); }, rounded: {\n            borderRadius: theme.shape.borderRadius,\n        } }, elevations);\n});\nvar AudioPlayerComponentsOrder;\n(function (AudioPlayerComponentsOrder) {\n    AudioPlayerComponentsOrder[\"standart\"] = \"standart\";\n    AudioPlayerComponentsOrder[\"reverse\"] = \"reverse\";\n})(AudioPlayerComponentsOrder = exports.AudioPlayerComponentsOrder || (exports.AudioPlayerComponentsOrder = {}));\nvar getColors = function (theme, variation) {\n    if (variation === AudioPlayerVariation.default) {\n        return {\n            active: theme.palette.action.active,\n            selected: theme.palette.action.selected,\n            disabled: theme.palette.action.disabled,\n            hover: theme.palette.action.hover,\n        };\n    }\n    else {\n        return {\n            active: theme.palette[variation].main,\n            selected: theme.palette[variation].dark,\n            disabled: theme.palette[variation].light,\n            hover: theme.palette[variation].light,\n        };\n    }\n};\nexports.getColors = getColors;\nvar AudioPlayerVariation;\n(function (AudioPlayerVariation) {\n    AudioPlayerVariation[\"primary\"] = \"primary\";\n    AudioPlayerVariation[\"secondary\"] = \"secondary\";\n    AudioPlayerVariation[\"default\"] = \"default\";\n})(AudioPlayerVariation = exports.AudioPlayerVariation || (exports.AudioPlayerVariation = {}));\nvar AudioPlayerPreload;\n(function (AudioPlayerPreload) {\n    AudioPlayerPreload[\"auto\"] = \"auto\";\n    AudioPlayerPreload[\"metadata\"] = \"metadata\";\n    AudioPlayerPreload[\"none\"] = \"none\";\n})(AudioPlayerPreload || (AudioPlayerPreload = {}));\nvar TimeOption;\n(function (TimeOption) {\n    TimeOption[\"single\"] = \"single\";\n    TimeOption[\"double\"] = \"double\";\n})(TimeOption = exports.TimeOption || (exports.TimeOption = {}));\nvar TimePosition;\n(function (TimePosition) {\n    TimePosition[\"start\"] = \"start\";\n    TimePosition[\"end\"] = \"end\";\n})(TimePosition = exports.TimePosition || (exports.TimePosition = {}));\nvar AudioPlayer = function (_a) {\n    var _b, _c;\n    var src = _a.src, _d = _a.rounded, rounded = _d === void 0 ? true : _d, _e = _a.elevation, elevation = _e === void 0 ? 1 : _e, _f = _a.useStyles, useStyles = _f === void 0 ? function () { return ({}); } : _f, _g = _a.width, width = _g === void 0 ? '100%' : _g, _h = _a.height, height = _h === void 0 ? 'auto' : _h, _j = _a.variation, variation = _j === void 0 ? AudioPlayerVariation.default : _j, _k = _a.preload, preload = _k === void 0 ? AudioPlayerPreload.auto : _k, _l = _a.volume, volume = _l === void 0 ? true : _l, _m = _a.muted, muted = _m === void 0 ? null : _m, _o = _a.download, download = _o === void 0 ? false : _o, _p = _a.autoplay, autoplay = _p === void 0 ? false : _p, _q = _a.order, order = _q === void 0 ? AudioPlayerComponentsOrder.standart : _q, _r = _a.loop, loop = _r === void 0 ? false : _r, _s = _a.debug, debug = _s === void 0 ? false : _s, _t = _a.spacing, spacing = _t === void 0 ? undefined : _t, _u = _a.time, time = _u === void 0 ? 'double' : _u, _v = _a.timePosition, timePosition = _v === void 0 ? 'start' : _v, _w = _a.displaySlider, displaySlider = _w === void 0 ? true : _w, _x = _a.displayCloseButton, displayCloseButton = _x === void 0 ? false : _x, icons = _a.icons, _y = _a.onPlayed, onPlayed = _y === void 0 ? function (event) { } : _y, _z = _a.onPaused, onPaused = _z === void 0 ? function (event) { } : _z, _0 = _a.onFinished, onFinished = _0 === void 0 ? function (event) { } : _0, _1 = _a.getPlayer, getPlayer = _1 === void 0 ? function (player, dispatch) { } : _1, _2 = _a.onClose, onClose = _2 === void 0 ? function () { } : _2;\n    var player = React.useRef(null);\n    var _3 = React.useState(true), visible = _3[0], setVisibility = _3[1];\n    var handleClose = React.useCallback(function () {\n        setVisibility(false);\n        onClose();\n    }, []);\n    var theme = useTheme_1.default();\n    var playerColors = exports.getColors(theme, variation);\n    var componentsOrder = order === AudioPlayerComponentsOrder.standart ? 'unset' : '-1';\n    var componentStyles = { width: width, height: height, playerColors: playerColors, componentsOrder: componentsOrder };\n    var classes = exports.useComponentStyles(componentStyles);\n    var classNames = useStyles(componentStyles);\n    var isMobile = useMediaQuery_1.default(theme.breakpoints.down('sm'));\n    var isSingleTime = React.useMemo(function () { return time === TimeOption.single; }, [time]);\n    var isTimePositionStart = React.useMemo(function () { return timePosition === TimePosition.start; }, [timePosition]);\n    var _4 = React.useState(true), showCurrentTime = _4[0], toggleTime = _4[1];\n    var toggleCurrentTime = React.useCallback(function () { return toggleTime(function (val) { return !val; }); }, [\n        toggleTime,\n    ]);\n    var _5 = React.useReducer(reducer_1.default, inititalState), state = _5[0], dispatch = _5[1];\n    var _6 = React.useMemo(function () {\n        return helpers_1.populateDispatch.apply(void 0, __spreadArrays([dispatch, player], actions_1.actionCreators));\n    }, [dispatch, player, actions_1.actionCreators]), _playAudio = _6[0], _pauseAudio = _6[1], _muteAudio = _6[2], _unmuteAudio = _6[3], _changeAudioVolume = _6[4], _setPlayerDuration = _6[5], _setPlayerTime = _6[6], _audioEnded = _6[7], _replayAudio = _6[8], _changePlayerSlider = _6[9], _setPlayerAutoplay = _6[10], _loopAudio = _6[11];\n    var handleAudioSliderChange = function (event, progress) {\n        _changePlayerSlider(progress);\n    };\n    var handlePlayerTimeUpdate = function () {\n        _setPlayerTime();\n    };\n    var handleAudioEnd = function (event) {\n        _audioEnded();\n        onFinished(event);\n    };\n    var onLoad = function () {\n        var _a, _b, _c, _d;\n        if (((_a = player === null || player === void 0 ? void 0 : player.current) === null || _a === void 0 ? void 0 : _a.duration) === Infinity) {\n            player.current.currentTime = 24 * 60 * 60;\n            player.current.currentTime = 0;\n        }\n        _setPlayerDuration();\n        getPlayer(player.current, dispatch);\n        if (((_b = player === null || player === void 0 ? void 0 : player.current) === null || _b === void 0 ? void 0 : _b.currentTime) === 0) {\n            if (((_c = player === null || player === void 0 ? void 0 : player.current) === null || _c === void 0 ? void 0 : _c.autoplay) || ((_d = player === null || player === void 0 ? void 0 : player.current) === null || _d === void 0 ? void 0 : _d.loop)) {\n            }\n            else {\n                _pauseAudio();\n            }\n        }\n    };\n    React.useEffect(function () {\n        if (player && player.current) {\n            if (player.current.readyState > 3) {\n                onLoad();\n            }\n            if (!player.current.autoplay && autoplay) {\n                _setPlayerAutoplay();\n            }\n            if (isSafari) {\n                player.current.load();\n            }\n            player.current.addEventListener('canplay', onLoad);\n            player.current.addEventListener('timeupdate', handlePlayerTimeUpdate);\n            player.current.addEventListener('ended', handleAudioEnd);\n            player.current.addEventListener('pause', onPaused);\n            player.current.addEventListener('play', onPlayed);\n        }\n        return function () {\n            if (player && player.current) {\n                player.current.removeEventListener('canplay', onLoad);\n                player.current.removeEventListener('timeupdate', handlePlayerTimeUpdate);\n                player.current.removeEventListener('ended', handleAudioEnd);\n                player.current.removeEventListener('pause', onPaused);\n                player.current.removeEventListener('play', onPlayed);\n            }\n        };\n    }, [player, src]);\n    React.useEffect(function () {\n        if ((player === null || player === void 0 ? void 0 : player.current) && typeof muted === 'boolean') {\n            if (muted) {\n                _muteAudio();\n            }\n            else {\n                _unmuteAudio();\n            }\n        }\n    }, [muted]);\n    if (debug) {\n        console.log('state', state);\n        console.log('player', player);\n    }\n    var handleLoop = function () {\n        _loopAudio(!state.player.loop);\n    };\n    var mainContainerSpacing = spacing\n        ? spacing\n        : isMobile\n            ? 2\n            : 3;\n    var audioKey = Array.isArray(src) ? src[0] : src;\n    var currentTimeComp = (React.createElement(Grid_1.default, { item: true, className: classnames_1.default(classes.commonContainer) },\n        React.createElement(Typography_1.default, { className: classNames.progressTime, onClick: toggleCurrentTime }, showCurrentTime\n            ? helpers_1.getFormattedTime(state.player.current)\n            : helpers_1.getFormattedTime(state.player.remaning, true))));\n    return visible ? (React.createElement(Grid_1.default, { container: true, spacing: mainContainerSpacing, component: Paper_1.default, alignItems: \"center\", className: classnames_1.default(classes.root, classes[\"elevation\" + elevation], (_b = {},\n            _b[classes.rounded] = !rounded,\n            _b), classNames.root) },\n        React.createElement(\"audio\", { ref: player, hidden: true, preload: preload, key: audioKey }, Array.isArray(src) ? (src.map(function (srcLink, index) { return React.createElement(\"source\", { key: index, src: srcLink }); })) : (React.createElement(\"source\", { src: src }))),\n        loop && (React.createElement(Grid_1.default, { item: true, className: classes.commonContainer },\n            React.createElement(Repeat_1.default, { fontSize: \"large\", onClick: handleLoop, className: classnames_1.default((_c = {},\n                    _c[classes.iconSelected] = state.player.loop,\n                    _c.selected = state.player.loop,\n                    _c[classes.icon] = !state.player.loop,\n                    _c), classNames.loopIcon) }))),\n        React.createElement(Grid_1.default, { item: true, className: classes.commonContainer },\n            React.createElement(AudioPlayControl_1.default, { classNames: classNames, icons: icons, playerStatus: state.player.status, playerColors: playerColors, replayAudio: _replayAudio, pauseAudio: _pauseAudio, playAudio: _playAudio })),\n        download && (React.createElement(AudioDownloadsControl_1.default, { src: src, playerColors: playerColors })),\n        volume && (React.createElement(AudioVolumeControl_1.default, { muted: muted, muteAudio: _muteAudio, unmuteAudio: _unmuteAudio, classNames: classNames, changeAudioVolume: _changeAudioVolume, volume: state.player.volume, playerColors: playerColors, icons: icons })),\n        displaySlider && (React.createElement(Grid_1.default, { item: true, container: true, spacing: 2, className: classnames_1.default(classes.sliderContainerWrapper) },\n            (!isSingleTime || isTimePositionStart) && currentTimeComp,\n            React.createElement(Grid_1.default, { item: true, className: classes.sliderContainer },\n                React.createElement(Slider_1.default, { className: classnames_1.default(classes.slider, classNames.mainSlider), onChange: handleAudioSliderChange, value: state.player.progress })),\n            !isSingleTime && (React.createElement(Grid_1.default, { item: true, className: classes.commonContainer },\n                React.createElement(Typography_1.default, { className: classNames.progressTime }, helpers_1.getFormattedTime(state.player.duration)))),\n            isSingleTime && !isTimePositionStart && currentTimeComp)),\n        displayCloseButton && (React.createElement(AudioPlayerCloseButton_1.default, { onClose: handleClose, classNames: classNames, playerColors: playerColors, icons: icons })))) : null;\n};\nexports.default = AudioPlayer;\n//# sourceMappingURL=AudioPlayer.js.map"]},"metadata":{},"sourceType":"script"}